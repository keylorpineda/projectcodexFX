<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<StackPane fx:id="root" prefHeight="821.0" prefWidth="1064.0" styleClass="login-root" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.municipal.ui.controllers.LoginController">
    
    <!-- Background Decorative Layer -->
    <StackPane styleClass="backdrop-layer">
        <Circle opacity="0.3" radius="300" styleClass="background-glow-1" />
        <Circle opacity="0.25" radius="250" styleClass="background-glow-2" />
    </StackPane>
    
    <!-- Main Login Container -->
    <StackPane maxWidth="1200" styleClass="login-container">
        <HBox fx:id="loginGrid" alignment="CENTER" spacing="0" styleClass="login-grid login-card">
            
            <!-- Left Panel - Hero Section -->
            <VBox fx:id="heroPanel" alignment="CENTER_LEFT" minWidth="400" prefWidth="600" spacing="24" styleClass="hero-panel" HBox.hgrow="ALWAYS">
                <padding>
                    <Insets bottom="64" left="56" right="56" top="64" />
                </padding>
                
                <!-- System Badge -->
                <Label styleClass="hero-badge" text="Sistema de Reservas" />
                
                <!-- Main Title -->
                <VBox spacing="8">
                    <Label styleClass="hero-title" text="Municipalidad de" wrapText="true" />
                    <Label styleClass="hero-title" text="Pérez" wrapText="true" />
                    <Label styleClass="hero-title" text="Zeledón" wrapText="true" />
                </VBox>
                
                <!-- Description -->
                <Label styleClass="hero-description" text="Administra espacios, reservas y alertas en un solo lugar, con seguridad garantizada por Azure Active Directory." wrapText="true" />
                
                <!-- Features List -->
                <VBox spacing="14" styleClass="hero-features">
                    <HBox alignment="CENTER_LEFT" spacing="12">
                        <Label styleClass="feature-bullet" text="●" />
                        <Label styleClass="feature-text" text="Monitoreo en tiempo real de reservas y clima" wrapText="true" HBox.hgrow="ALWAYS" />
                    </HBox>
                    
                    <HBox alignment="CENTER_LEFT" spacing="12">
                        <Label styleClass="feature-bullet" text="●" />
                        <Label styleClass="feature-text" text="Indicadores clave y alertas automáticas" wrapText="true" HBox.hgrow="ALWAYS" />
                    </HBox>
                    
                    <HBox alignment="CENTER_LEFT" spacing="12">
                        <Label styleClass="feature-bullet" text="●" />
                        <Label styleClass="feature-text" text="Integración segura con Azure Active Directory" wrapText="true" HBox.hgrow="ALWAYS" />
                    </HBox>
                </VBox>
                
                <!-- Info Button -->
                <Button styleClass="info-button" text="Información sobre el sistema">
                    <graphic>
                        <HBox alignment="CENTER" spacing="8">
                            <Circle radius="4" styleClass="info-button-icon" />
                            <Label styleClass="info-button-emoji" text="ℹ" />
                        </HBox>
                    </graphic>
                </Button>
                
                <!-- Footer -->
                <Region VBox.vgrow="ALWAYS" />
                <Label styleClass="hero-footer" text="© 2025 Municipalidad de Pérez Zeledón — Sistema de Reservas" wrapText="true" />
            </VBox>
            
            <!-- Right Panel - Login Form -->
            <VBox fx:id="cardPanel" alignment="TOP_CENTER" minWidth="400" prefWidth="500" spacing="28" styleClass="card-panel" HBox.hgrow="ALWAYS">
                <padding>
                    <Insets bottom="56" left="56" right="56" top="56" />
                </padding>
                
                <!-- Welcome Section -->
                <VBox alignment="CENTER_LEFT" minHeight="-Infinity" minWidth="-Infinity" prefHeight="149.0" prefWidth="350.0" spacing="10.0" VBox.vgrow="ALWAYS">
                    <Label styleClass="welcome-title" text="Bienvenido" />
                    <Label styleClass="welcome-subtitle" text="Ingresa con tu cuenta Microsoft personal o institucional para acceder al sistema." wrapText="true" />
                </VBox>
                
                <!-- Azure Login Button -->
                <VBox fillWidth="true" minHeight="-Infinity" minWidth="-Infinity" prefHeight="130.0" prefWidth="350.0" spacing="16">
                    <Label styleClass="section-label" text="Inicio de sesión" />
                    
                    <Button fx:id="azureLoginButton" maxWidth="Infinity" onAction="#handleAzureLogin" prefHeight="78.0" prefWidth="330.0" styleClass="azure-button">
                        <graphic>
                            <HBox alignment="CENTER_LEFT" prefHeight="29.0" prefWidth="276.0" spacing="14">
                                <StackPane prefHeight="55.0" prefWidth="40.0" styleClass="azure-icon-badge">
                                    <Label prefHeight="14.0" prefWidth="22.0" styleClass="azure-icon-text" text="AD" />
                           <ImageView fitHeight="52.0" fitWidth="32.0" pickOnBounds="true" preserveRatio="true">
                              <image>
                                 <Image url="@../../../../images/microsoftlogo.png" />
                              </image>
                           </ImageView>
                                </StackPane>
                                <Label prefHeight="19.0" prefWidth="220.0" styleClass="azure-button-text" text="Iniciar sesión con Microsoft" HBox.hgrow="ALWAYS" />
                            </HBox>
                        </graphic>
                    </Button>
                    
                    <!-- Status Area -->
                    <HBox fx:id="statusContainer" alignment="CENTER_LEFT" managed="false" spacing="12" visible="false">
                        <ProgressIndicator fx:id="progressIndicator" prefHeight="28" prefWidth="28" />
                        <Label fx:id="statusLabel" styleClass="status-label" wrapText="true" HBox.hgrow="ALWAYS" />
                    </HBox>
                </VBox>
                
                <!-- Divider -->
                <HBox alignment="CENTER" fillHeight="false" spacing="12">
                    <StackPane styleClass="divider-line" HBox.hgrow="SOMETIMES" />
                    <Label styleClass="divider-text" text="SEGURIDAD GARANTIZADA" />
                    <StackPane styleClass="divider-line" HBox.hgrow="SOMETIMES" />
                </HBox>
                
                <!-- Security Info -->
                <Label styleClass="security-info" text="La autenticación se realiza exclusivamente mediante Azure Active Directory. Inicia sesión con tu cuenta Microsoft personal o institucional para acceder al panel administrativo de forma segura." wrapText="true" />
                
                <!-- Guidelines Box -->
                <VBox spacing="12" styleClass="guidelines-box">
                    <padding>
                        <Insets bottom="18" left="18" right="18" top="18" />
                    </padding>
                    
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label styleClass="guideline-bullet" text="●" />
                        <Label styleClass="guideline-text" text="Serás redirigido a la página oficial de Microsoft para autenticarte." wrapText="true" HBox.hgrow="ALWAYS" />
                    </HBox>
                    
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label styleClass="guideline-bullet" text="●" />
                        <Label styleClass="guideline-text" text="Nunca compartas tus credenciales. Microsoft y la Municipalidad protegen tu información." wrapText="true" HBox.hgrow="ALWAYS" />
                    </HBox>
                </VBox>
                
            </VBox>
        </HBox>
    </StackPane>
</StackPane>
