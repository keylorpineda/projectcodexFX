<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:id="mainContainer"
      fx:controller="com.municipal.reservationsfx.ui.controllers.AdminDashboardController"
      styleClass="admin-root"
      spacing="0"
      fillWidth="true">

    <!-- Top Header -->
    <HBox styleClass="admin-header" alignment="CENTER_LEFT" spacing="0" VBox.vgrow="NEVER">
        <padding>
            <Insets top="16" right="24" bottom="16" left="24"/>
        </padding>

        <!-- Logo Section -->
        <HBox alignment="CENTER_LEFT" spacing="12" HBox.hgrow="ALWAYS">
            <StackPane styleClass="logo-container" minWidth="40" minHeight="40">
                <Circle radius="20" styleClass="logo-bg"/>
                <Label text="🏛" styleClass="logo-icon"/>
            </StackPane>
            <VBox spacing="2">
                <Label text="Panel de Administración" styleClass="header-title"/>
                <Label text="Municipalidad de Pérez Zeledón" styleClass="header-subtitle"/>
            </VBox>
        </HBox>

        <!-- Spacer -->
        <Region HBox.hgrow="ALWAYS"/>

        <!-- Actions Section -->
        <HBox alignment="CENTER_RIGHT" spacing="12" HBox.hgrow="NEVER">
            <!-- Notifications Button -->
            <StackPane styleClass="notification-button">
                <Button styleClass="icon-button">
                    <graphic>
                        <Label text="🔔" styleClass="icon"/>
                    </graphic>
                </Button>
                <Label text="3" styleClass="notification-badge"/>
            </StackPane>

            <!-- User Menu -->
            <HBox styleClass="user-menu" spacing="8" alignment="CENTER">
                <Circle radius="16" styleClass="user-avatar"/>
                <VBox spacing="0">
                    <Label fx:id="userNameLabel" text="Carlos Rodríguez" styleClass="user-name"/>
                    <Label fx:id="userRoleLabel" text="Administrador" styleClass="user-role"/>
                </VBox>
            </HBox>
        </HBox>
    </HBox>

    <!-- Main Content Area -->
    <HBox spacing="0" VBox.vgrow="ALWAYS" fillHeight="true">

        <!-- Left Sidebar -->
        <VBox styleClass="sidebar" spacing="8" prefWidth="280" minWidth="240" HBox.hgrow="NEVER">
            <padding>
                <Insets top="24" right="20" bottom="24" left="20"/>
            </padding>

            <Label text="NAVEGACIÓN" styleClass="sidebar-section-title"/>

            <Button fx:id="navDashboardButton" text="Inicio" styleClass="nav-item nav-item-active"
                    maxWidth="Infinity" alignment="BASELINE_LEFT"
                    onAction="#handleNavigateDashboard">
                <graphic>
                    <Label text="🏠" styleClass="nav-icon"/>
                </graphic>
            </Button>

            <Button fx:id="navSpacesButton" text="Gestión de espacios" styleClass="nav-item"
                    maxWidth="Infinity" alignment="BASELINE_LEFT"
                    onAction="#handleNavigateSpaces">
                <graphic>
                    <Label text="🏢" styleClass="nav-icon"/>
                </graphic>
            </Button>

            <Button fx:id="navUsersButton" text="Gestión de usuarios" styleClass="nav-item"
                    maxWidth="Infinity" alignment="BASELINE_LEFT"
                    onAction="#handleNavigateUsers">
                <graphic>
                    <Label text="👥" styleClass="nav-icon"/>
                </graphic>
            </Button>

            <Button fx:id="navReservationsButton" text="Control de reservas" styleClass="nav-item"
                    maxWidth="Infinity" alignment="BASELINE_LEFT"
                    onAction="#handleNavigateReservations">
                <graphic>
                    <Label text="📅" styleClass="nav-icon"/>
                </graphic>
            </Button>

            <Button fx:id="navReportsButton" text="Reportes globales" styleClass="nav-item"
                    maxWidth="Infinity" alignment="BASELINE_LEFT"
                    onAction="#handleNavigateReports">
                <graphic>
                    <Label text="📊" styleClass="nav-icon"/>
                </graphic>
            </Button>

            <Button fx:id="navClimateButton" text="Monitoreo climático" styleClass="nav-item"
                    maxWidth="Infinity" alignment="BASELINE_LEFT"
                    onAction="#handleNavigateClimate">
                <graphic>
                    <Label text="☁️" styleClass="nav-icon"/>
                </graphic>
            </Button>

            <Button fx:id="navSettingsButton" text="Configuración" styleClass="nav-item"
                    maxWidth="Infinity" alignment="BASELINE_LEFT"
                    onAction="#handleNavigateSettings">
                <graphic>
                    <Label text="⚙️" styleClass="nav-icon"/>
                </graphic>
            </Button>
        </VBox>

        <!-- Main Content Scroll -->
        <ScrollPane fx:id="contentScroll" fitToWidth="true" fitToHeight="true" styleClass="content-scroll" HBox.hgrow="ALWAYS">
            <content>
                <StackPane styleClass="main-content-wrapper">

                    <!-- Dashboard Overview -->
                    <VBox fx:id="dashboardSection" spacing="24" styleClass="main-content" fillWidth="true">
                        <padding>
                            <Insets top="24" right="32" bottom="32" left="32"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="0">
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label text="Panel de Administración" styleClass="page-title"/>
                                <Label text="Resumen general del sistema de reservas" styleClass="page-subtitle"/>
                            </VBox>

                            <Button text="Actualizar datos" styleClass="refresh-button">
                                <graphic>
                                    <Label text="🔄" styleClass="button-icon"/>
                                </graphic>
                            </Button>
                        </HBox>

                        <VBox spacing="16" styleClass="metrics-container" fillWidth="true">
                            <HBox spacing="16" fillHeight="false">
                                <VBox styleClass="metric-card metric-success" spacing="8" HBox.hgrow="ALWAYS" minWidth="200">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>
                                    <Label text="Espacios Activos" styleClass="metric-label"/>
                                    <Label text="5/6" styleClass="metric-value"/>
                                    <Label text="Espacios disponibles para reserva" styleClass="metric-description" wrapText="true"/>
                                </VBox>

                                <VBox styleClass="metric-card" spacing="8" HBox.hgrow="ALWAYS" minWidth="200">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>
                                    <Label text="Reservas Hoy" styleClass="metric-label"/>
                                    <Label text="3" styleClass="metric-value"/>
                                    <Label text="Reservas programadas para hoy" styleClass="metric-description" wrapText="true"/>
                                </VBox>
                            </HBox>

                            <HBox spacing="16" fillHeight="false">
                                <VBox styleClass="metric-card metric-destructive" spacing="8" HBox.hgrow="ALWAYS" minWidth="200">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>
                                    <Label text="Inasistencias" styleClass="metric-label"/>
                                    <Label text="5" styleClass="metric-value"/>
                                    <Label text="Total de inasistencias registradas" styleClass="metric-description" wrapText="true"/>
                                </VBox>

                                <VBox styleClass="metric-card metric-success" spacing="8" HBox.hgrow="ALWAYS" minWidth="200">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>
                                    <Label text="Ocupación Semanal" styleClass="metric-label"/>
                                    <HBox spacing="8" alignment="CENTER_LEFT">
                                        <Label text="72.5%" styleClass="metric-value"/>
                                        <Label text="+5.2% ↑" styleClass="metric-trend"/>
                                    </HBox>
                                    <Label text="Promedio de ocupación" styleClass="metric-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </VBox>

                        <HBox spacing="24" fillHeight="false">
                            <VBox styleClass="card weather-card" spacing="16" prefWidth="360" HBox.hgrow="NEVER">
                                <padding>
                                    <Insets top="24" right="24" bottom="24" left="24"/>
                                </padding>

                                <HBox spacing="12" alignment="CENTER_LEFT">
                                    <Label text="Clima actual" styleClass="card-title"/>
                                    <Label text="Actualizado hace 5 min" styleClass="weather-badge"/>
                                </HBox>

                                <HBox spacing="24" alignment="CENTER_LEFT">
                                    <VBox spacing="8">
                                        <Label text="24°C" styleClass="weather-temp"/>
                                        <Label text="Soleado" styleClass="weather-condition"/>
                                        <Label text="Viento 12 km/h" styleClass="weather-detail"/>
                                        <Label text="Lluvia 10%" styleClass="weather-detail"/>
                                    </VBox>
                                    <StackPane styleClass="weather-icon-container" minWidth="100" minHeight="100">
                                        <Label text="☀️" styleClass="weather-icon-large"/>
                                    </StackPane>
                                </HBox>

                                <VBox styleClass="weather-message-success">
                                    <padding>
                                        <Insets top="12" right="12" bottom="12" left="12"/>
                                    </padding>
                                    <Label text="Excelente día para actividades al aire libre" styleClass="weather-message" wrapText="true"/>
                                </VBox>
                            </VBox>

                            <VBox styleClass="card" spacing="16" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="24" right="24" bottom="24" left="24"/>
                                </padding>

                                <HBox spacing="12" alignment="CENTER_LEFT">
                                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                                        <Label text="Alertas Rápidas" styleClass="card-title"/>
                                        <Label text="Notificaciones que requieren atención" styleClass="card-subtitle"/>
                                    </VBox>
                                    <Label text="2" styleClass="alert-count-badge"/>
                                </HBox>

                                <VBox spacing="12" fillWidth="true">
                                    <HBox styleClass="alert-item alert-item-warning" spacing="12" alignment="TOP_LEFT">
                                        <padding>
                                            <Insets top="12" right="12" bottom="12" left="12"/>
                                        </padding>
                                        <StackPane styleClass="alert-icon-container alert-icon-warning" minWidth="32" minHeight="32">
                                            <Label text="⚠️" styleClass="alert-icon"/>
                                        </StackPane>
                                        <VBox spacing="4" HBox.hgrow="ALWAYS">
                                            <HBox spacing="8" alignment="CENTER_LEFT">
                                                <Label text="Cancha Deportiva Norte" styleClass="alert-title" HBox.hgrow="ALWAYS"/>
                                                <Label text="Advertencia" styleClass="alert-badge alert-badge-warning"/>
                                            </HBox>
                                            <Label text="Alta probabilidad de lluvia" styleClass="alert-description" wrapText="true"/>
                                            <Label text="1 reserva(s) afectada(s)" styleClass="alert-meta"/>
                                        </VBox>
                                    </HBox>

                                    <HBox styleClass="alert-item alert-item-warning" spacing="12" alignment="TOP_LEFT">
                                        <padding>
                                            <Insets top="12" right="12" bottom="12" left="12"/>
                                        </padding>
                                        <StackPane styleClass="alert-icon-container alert-icon-warning" minWidth="32" minHeight="32">
                                            <Label text="☁️" styleClass="alert-icon"/>
                                        </StackPane>
                                        <VBox spacing="4" HBox.hgrow="ALWAYS">
                                            <HBox spacing="8" alignment="CENTER_LEFT">
                                                <Label text="Parque Recreativo Sur" styleClass="alert-title" HBox.hgrow="ALWAYS"/>
                                                <Label text="Advertencia" styleClass="alert-badge alert-badge-warning"/>
                                            </HBox>
                                            <Label text="Condiciones variables" styleClass="alert-description" wrapText="true"/>
                                            <Label text="1 reserva(s) afectada(s)" styleClass="alert-meta"/>
                                        </VBox>
                                    </HBox>
                                </VBox>
                            </VBox>
                        </HBox>

                        <VBox styleClass="card" spacing="16" fillWidth="true">
                            <padding>
                                <Insets top="24" right="24" bottom="24" left="24"/>
                            </padding>

                            <VBox spacing="4">
                                <Label text="Acciones Rápidas" styleClass="card-title"/>
                                <Label text="Accesos directos a funciones principales" styleClass="card-subtitle"/>
                            </VBox>

                            <VBox spacing="12" fillWidth="true">
                                <HBox spacing="12" fillHeight="false">
                                    <Button text="Gestionar Espacios" styleClass="action-button" maxWidth="Infinity" HBox.hgrow="ALWAYS">
                                        <graphic>
                                            <Label text="🏢" styleClass="action-icon"/>
                                        </graphic>
                                    </Button>

                                    <Button text="Ver Usuarios" styleClass="action-button" maxWidth="Infinity" HBox.hgrow="ALWAYS">
                                        <graphic>
                                            <Label text="👥" styleClass="action-icon"/>
                                        </graphic>
                                    </Button>
                                </HBox>

                                <HBox spacing="12" fillHeight="false">
                                    <Button text="Control de Reservas" styleClass="action-button" maxWidth="Infinity" HBox.hgrow="ALWAYS">
                                        <graphic>
                                            <Label text="📅" styleClass="action-icon"/>
                                        </graphic>
                                    </Button>

                                    <Button text="Monitoreo Climático" styleClass="action-button" maxWidth="Infinity" HBox.hgrow="ALWAYS">
                                        <graphic>
                                            <Label text="☁️" styleClass="action-icon"/>
                                        </graphic>
                                    </Button>
                                </HBox>
                            </VBox>
                        </VBox>
                    </VBox>

                    <!-- Spaces Management -->
                    <VBox fx:id="spacesSection" spacing="24" styleClass="main-content" fillWidth="true" visible="false" managed="false">
                        <padding>
                            <Insets top="24" right="32" bottom="32" left="32"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label text="Gestión de Espacios" styleClass="page-title"/>
                                <Label text="Administra todos los espacios disponibles" styleClass="page-subtitle"/>
                            </VBox>
                            <Button text="Nuevo Espacio" styleClass="refresh-button primary-button-raised">
                                <graphic>
                                    <Label text="＋" styleClass="button-icon"/>
                                </graphic>
                            </Button>
                        </HBox>

                        <HBox spacing="16" alignment="CENTER_LEFT" styleClass="card">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label text="Filtros" styleClass="card-title"/>
                                <Label text="Busca y filtra espacios por diferentes criterios" styleClass="card-subtitle"/>
                            </VBox>
                            <ChoiceBox>
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Todos los tipos"/>
                                        <String fx:value="Interior"/>
                                        <String fx:value="Exterior"/>
                                    </FXCollections>
                                </items>
                            </ChoiceBox>
                            <ChoiceBox>
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Todos los estados"/>
                                        <String fx:value="Disponible"/>
                                        <String fx:value="Mantenimiento"/>
                                    </FXCollections>
                                </items>
                            </ChoiceBox>
                            <TextField promptText="Buscar por nombre o código" maxWidth="280"/>
                            <Button text="Aplicar" styleClass="pill-button"/>
                        </HBox>

                        <VBox spacing="12" styleClass="card" fillWidth="true">
                            <padding>
                                <Insets top="18" right="18" bottom="24" left="18"/>
                            </padding>

                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Label fx:id="spacesCountLabel" text="Espacios (0)" styleClass="card-title" HBox.hgrow="ALWAYS"/>
                                <Button text="Actualizar" styleClass="pill-button" onAction="#handleRefreshSpaces">
                                    <graphic>
                                        <Label text="🔄" styleClass="button-icon"/>
                                    </graphic>
                                </Button>
                                <Button text="Exportar" styleClass="pill-button"/>
                            </HBox>

                            <VBox spacing="10" fillWidth="true">
                                <StackPane styleClass="table-container">
                                    <TableView fx:id="spacesTable" prefHeight="420" columnResizePolicy="CONSTRAINED_RESIZE_POLICY">
                                        <columns>
                                            <TableColumn fx:id="spaceNameColumn" text="Nombre" prefWidth="220"/>
                                            <TableColumn fx:id="spaceCapacityColumn" text="Capacidad" prefWidth="140"/>
                                            <TableColumn fx:id="spaceStatusColumn" text="Estado" prefWidth="140"/>
                                            <TableColumn fx:id="spaceTypeColumn" text="Tipo" prefWidth="160"/>
                                        </columns>
                                    </TableView>
                                    <VBox fx:id="spacesLoadingOverlay" alignment="CENTER" spacing="12" visible="false" managed="false" styleClass="loading-overlay">
                                        <ProgressIndicator prefWidth="42" prefHeight="42"/>
                                        <Label fx:id="spacesLoadingLabel" text="Cargando espacios..." styleClass="status-label status-info" wrapText="true"/>
                                    </VBox>
                                </StackPane>
                                <Label fx:id="spacesStatusLabel" text="" visible="false" managed="false" styleClass="status-label" wrapText="true"/>
                            </VBox>
                        </VBox>
                    </VBox>

                    <!-- Users Management -->
                    <VBox fx:id="usersSection" spacing="24" styleClass="main-content" fillWidth="true" visible="false" managed="false">
                        <padding>
                            <Insets top="24" right="32" bottom="32" left="32"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label text="Gestión de Usuarios" styleClass="page-title"/>
                                <Label text="Administra roles y accesos de usuarios" styleClass="page-subtitle"/>
                            </VBox>
                            <Button text="Agregar Usuario" styleClass="refresh-button primary-button-raised">
                                <graphic>
                                    <Label text="＋" styleClass="button-icon"/>
                                </graphic>
                            </Button>
                        </HBox>

                        <HBox spacing="16" alignment="CENTER_LEFT" styleClass="card">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label text="Filtros" styleClass="card-title"/>
                                <Label text="Filtra usuarios por diferentes criterios" styleClass="card-subtitle"/>
                            </VBox>
                            <TextField promptText="Buscar por nombre o correo" maxWidth="260"/>
                            <ChoiceBox>
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Todos los roles"/>
                                        <String fx:value="Administrador"/>
                                        <String fx:value="Supervisor"/>
                                        <String fx:value="Operador"/>
                                    </FXCollections>
                                </items>
                            </ChoiceBox>
                            <ChoiceBox>
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Activos"/>
                                        <String fx:value="Suspendidos"/>
                                    </FXCollections>
                                </items>
                            </ChoiceBox>
                            <Button text="Aplicar" styleClass="pill-button"/>
                        </HBox>

                        <VBox spacing="12" styleClass="card" fillWidth="true">
                            <padding>
                                <Insets top="18" right="18" bottom="24" left="18"/>
                            </padding>

                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Label text="Usuarios (5)" styleClass="card-title" HBox.hgrow="ALWAYS"/>
                                <Button text="Exportar" styleClass="pill-button"/>
                            </HBox>

                            <VBox spacing="12" fillWidth="true">
                                <HBox spacing="16" alignment="CENTER_LEFT" styleClass="top-space-cell">
                                    <Circle radius="20" styleClass="user-avatar"/>
                                    <VBox spacing="2" HBox.hgrow="ALWAYS">
                                        <Label text="María González" styleClass="user-name"/>
                                        <Label text="maria.gonzalez@perezzeledon.go.cr" styleClass="muted-label"/>
                                    </VBox>
                                    <Label text="Administrador" styleClass="pill-button"/>
                                    <Label text="Activo" styleClass="pill-button"/>
                                    <Button text="Ver detalles" styleClass="ghost-button"/>
                                </HBox>

                                <HBox spacing="16" alignment="CENTER_LEFT" styleClass="top-space-cell">
                                    <Circle radius="20" styleClass="user-avatar"/>
                                    <VBox spacing="2" HBox.hgrow="ALWAYS">
                                        <Label text="Carlos Rodríguez" styleClass="user-name"/>
                                        <Label text="carlos.rodriguez@perezzeledon.go.cr" styleClass="muted-label"/>
                                    </VBox>
                                    <Label text="Administrador" styleClass="pill-button"/>
                                    <Label text="Activo" styleClass="pill-button"/>
                                    <Button text="Ver detalles" styleClass="ghost-button"/>
                                </HBox>

                                <HBox spacing="16" alignment="CENTER_LEFT" styleClass="top-space-cell">
                                    <Circle radius="20" styleClass="user-avatar"/>
                                    <VBox spacing="2" HBox.hgrow="ALWAYS">
                                        <Label text="Juan Pérez" styleClass="user-name"/>
                                        <Label text="juan.perez@perezzeledon.go.cr" styleClass="muted-label"/>
                                    </VBox>
                                    <Label text="Supervisor" styleClass="pill-button"/>
                                    <Label text="Activo" styleClass="pill-button"/>
                                    <Button text="Ver detalles" styleClass="ghost-button"/>
                                </HBox>

                                <HBox spacing="16" alignment="CENTER_LEFT" styleClass="top-space-cell">
                                    <Circle radius="20" styleClass="user-avatar"/>
                                    <VBox spacing="2" HBox.hgrow="ALWAYS">
                                        <Label text="Laura Rojas" styleClass="user-name"/>
                                        <Label text="laura.rojas@perezzeledon.go.cr" styleClass="muted-label"/>
                                    </VBox>
                                    <Label text="Operador" styleClass="pill-button"/>
                                    <Label text="Activo" styleClass="pill-button"/>
                                    <Button text="Ver detalles" styleClass="ghost-button"/>
                                </HBox>
                            </VBox>
                        </VBox>
                    </VBox>

                    <!-- Reservations Control -->
                    <VBox fx:id="reservationsSection" spacing="24" styleClass="main-content" fillWidth="true" visible="false" managed="false">
                        <padding>
                            <Insets top="24" right="32" bottom="32" left="32"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label text="Control de Reservas" styleClass="page-title"/>
                                <Label text="Visualiza y gestiona todas las reservas del sistema" styleClass="page-subtitle"/>
                            </VBox>
                            <Button text="Actualizar" styleClass="refresh-button">
                                <graphic>
                                    <Label text="🔄" styleClass="button-icon"/>
                                </graphic>
                            </Button>
                        </HBox>

                        <HBox spacing="16" alignment="CENTER_LEFT" styleClass="card">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label text="Filtros" styleClass="card-title"/>
                                <Label text="Filtra reservas por espacio, usuario o estado" styleClass="card-subtitle"/>
                            </VBox>
                            <ChoiceBox>
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Todos los espacios"/>
                                        <String fx:value="Salón Comunal Central"/>
                                        <String fx:value="Cancha Deportiva Norte"/>
                                    </FXCollections>
                                </items>
                            </ChoiceBox>
                            <ChoiceBox>
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Todos los usuarios"/>
                                        <String fx:value="María González"/>
                                        <String fx:value="Juan Pérez"/>
                                    </FXCollections>
                                </items>
                            </ChoiceBox>
                            <ChoiceBox>
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Todos los estados"/>
                                        <String fx:value="Confirmada"/>
                                        <String fx:value="Pendiente"/>
                                        <String fx:value="Cancelada"/>
                                    </FXCollections>
                                </items>
                            </ChoiceBox>
                            <Button text="Aplicar" styleClass="pill-button"/>
                        </HBox>

                        <VBox spacing="12" styleClass="card" fillWidth="true">
                            <padding>
                                <Insets top="18" right="18" bottom="24" left="18"/>
                            </padding>

                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Label text="Reservas (5)" styleClass="card-title" HBox.hgrow="ALWAYS"/>
                                <Button text="Exportar" styleClass="pill-button"/>
                            </HBox>

                            <GridPane hgap="12" vgap="12">
                                <columnConstraints>
                                    <ColumnConstraints percentWidth="22"/>
                                    <ColumnConstraints percentWidth="18"/>
                                    <ColumnConstraints percentWidth="20"/>
                                    <ColumnConstraints percentWidth="12"/>
                                    <ColumnConstraints percentWidth="8"/>
                                    <ColumnConstraints percentWidth="20"/>
                                </columnConstraints>

                                <Label text="Usuario" styleClass="card-subtitle" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <Label text="Espacio" styleClass="card-subtitle" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                                <Label text="Fecha" styleClass="card-subtitle" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                                <Label text="Estado" styleClass="card-subtitle" GridPane.rowIndex="0" GridPane.columnIndex="3"/>
                                <Label text="QR" styleClass="card-subtitle" GridPane.rowIndex="0" GridPane.columnIndex="4"/>
                                <Label text="Clima" styleClass="card-subtitle" GridPane.rowIndex="0" GridPane.columnIndex="5"/>

                                <Label text="María González" styleClass="user-name" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                <Label text="Salón Comunal Central" styleClass="muted-label" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                                <Label text="2025-10-20 16:00" styleClass="muted-label" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                                <Label text="Confirmada" styleClass="pill-button" GridPane.rowIndex="1" GridPane.columnIndex="3"/>
                                <Label text="✔" styleClass="pill-button" GridPane.rowIndex="1" GridPane.columnIndex="4"/>
                                <Label text="24°C ☀️" styleClass="muted-label" GridPane.rowIndex="1" GridPane.columnIndex="5"/>

                                <Label text="Juan Pérez" styleClass="user-name" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                <Label text="Cancha Deportiva Norte" styleClass="muted-label" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                                <Label text="2025-10-21 10:00" styleClass="muted-label" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                                <Label text="Confirmada" styleClass="pill-button" GridPane.rowIndex="2" GridPane.columnIndex="3"/>
                                <Label text="✔" styleClass="pill-button" GridPane.rowIndex="2" GridPane.columnIndex="4"/>
                                <Label text="22°C 🌤" styleClass="muted-label" GridPane.rowIndex="2" GridPane.columnIndex="5"/>

                                <Label text="Laura Rojas" styleClass="user-name" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                <Label text="Auditorio Municipal" styleClass="muted-label" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                                <Label text="2025-10-22 18:00" styleClass="muted-label" GridPane.rowIndex="3" GridPane.columnIndex="2"/>
                                <Label text="Pendiente" styleClass="alert-badge alert-badge-warning" GridPane.rowIndex="3" GridPane.columnIndex="3"/>
                                <Label text="—" styleClass="muted-label" GridPane.rowIndex="3" GridPane.columnIndex="4"/>
                                <Label text="23°C 🌦" styleClass="muted-label" GridPane.rowIndex="3" GridPane.columnIndex="5"/>

                                <Label text="Mario Castillo" styleClass="user-name" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                <Label text="Parque Recreativo Sur" styleClass="muted-label" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                                <Label text="2025-10-23 09:00" styleClass="muted-label" GridPane.rowIndex="4" GridPane.columnIndex="2"/>
                                <Label text="Cancelada" styleClass="status-warning" GridPane.rowIndex="4" GridPane.columnIndex="3"/>
                                <Label text="✖" styleClass="status-warning" GridPane.rowIndex="4" GridPane.columnIndex="4"/>
                                <Label text="N/A" styleClass="muted-label" GridPane.rowIndex="4" GridPane.columnIndex="5"/>
                            </GridPane>
                        </VBox>
                    </VBox>

                    <!-- Reports Analytics -->
                    <VBox fx:id="reportsSection" spacing="24" styleClass="main-content" fillWidth="true" visible="false" managed="false">
                        <padding>
                            <Insets top="24" right="32" bottom="32" left="32"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label text="Reportes Globales" styleClass="page-title"/>
                                <Label text="Análisis estadístico del uso de instalaciones" styleClass="page-subtitle"/>
                            </VBox>
                            <Button text="Exportar Excel" styleClass="pill-button"/>
                            <Button text="Exportar PDF" styleClass="pill-button"/>
                        </HBox>

                        <HBox spacing="16" alignment="CENTER_LEFT" styleClass="card">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label text="Rango de fechas" styleClass="card-title"/>
                                <Label text="Selecciona el período para generar el reporte" styleClass="card-subtitle"/>
                            </VBox>
                            <ChoiceBox>
                                <items>
                                    <FXCollections fx:factory="observableArrayList">
                                        <String fx:value="Último mes"/>
                                        <String fx:value="Últimos 3 meses"/>
                                        <String fx:value="Últimos 6 meses"/>
                                        <String fx:value="Año en curso"/>
                                    </FXCollections>
                                </items>
                            </ChoiceBox>
                            <Button text="Aplicar" styleClass="pill-button"/>
                        </HBox>

                        <HBox spacing="16" fillHeight="false">
                            <VBox styleClass="metric-card" spacing="8" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="Reservas Activas" styleClass="metric-label"/>
                                <Label text="2" styleClass="metric-value"/>
                                <Label text="Reservas confirmadas para el período" styleClass="metric-description" wrapText="true"/>
                            </VBox>
                            <VBox styleClass="metric-card" spacing="8" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="Reservas Completadas" styleClass="metric-label"/>
                                <Label text="8" styleClass="metric-value"/>
                                <Label text="Eventos completados sin incidentes" styleClass="metric-description" wrapText="true"/>
                            </VBox>
                            <VBox styleClass="metric-card" spacing="8" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="Tasa de Asistencia" styleClass="metric-label"/>
                                <Label text="88.9%" styleClass="metric-value"/>
                                <Label text="11% menos ausencias que el período anterior" styleClass="metric-description" wrapText="true"/>
                            </VBox>
                            <VBox styleClass="metric-card metric-destructive" spacing="8" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="Incidencias" styleClass="metric-label"/>
                                <Label text="1" styleClass="metric-value"/>
                                <Label text="Requiere seguimiento" styleClass="metric-description" wrapText="true"/>
                            </VBox>
                        </HBox>

                        <HBox spacing="16" fillHeight="true">
                            <VBox styleClass="card" spacing="16" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="24" right="24" bottom="24" left="24"/>
                                </padding>
                                <Label text="Distribución por Tipo de Espacio" styleClass="card-title"/>
                                <PieChart prefHeight="240">
                                    <data>
                                        <PieChart.Data name="Interior" pieValue="60"/>
                                        <PieChart.Data name="Exterior" pieValue="40"/>
                                    </data>
                                </PieChart>
                            </VBox>
                            <VBox styleClass="card" spacing="16" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="24" right="24" bottom="24" left="24"/>
                                </padding>
                                <Label text="Espacios Más Utilizados" styleClass="card-title"/>
                                <VBox spacing="10" fillWidth="true">
                                    <Label text="Salón Comunal Central — 24 reservas" styleClass="top-space-cell"/>
                                    <Label text="Cancha Deportiva Norte — 18 reservas" styleClass="top-space-cell"/>
                                    <Label text="Parque Recreativo Sur — 12 reservas" styleClass="top-space-cell"/>
                                </VBox>
                            </VBox>
                        </HBox>
                    </VBox>

                    <!-- Climate Monitoring -->
                    <VBox fx:id="climateSection" spacing="24" styleClass="main-content" fillWidth="true" visible="false" managed="false">
                        <padding>
                            <Insets top="24" right="32" bottom="32" left="32"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label text="Monitoreo Climático" styleClass="page-title"/>
                                <Label text="Vista global del clima y alertas automáticas" styleClass="page-subtitle"/>
                            </VBox>
                            <Button text="Actualizar todos" styleClass="refresh-button">
                                <graphic>
                                    <Label text="🔄" styleClass="button-icon"/>
                                </graphic>
                            </Button>
                        </HBox>

                        <VBox spacing="12" styleClass="card" fillWidth="true">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <Label text="Alertas meteorológicas activas" styleClass="card-title"/>
                            <Label text="Se detectaron 3 espacios con alerta meteorológica activa. Revisa los detalles y notifica a los usuarios afectados." styleClass="alert-description" wrapText="true"/>
                        </VBox>

                        <HBox spacing="16" fillHeight="false">
                            <VBox styleClass="metric-card" spacing="8" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="Espacios Monitoreados" styleClass="metric-label"/>
                                <Label text="6" styleClass="metric-value"/>
                            </VBox>
                            <VBox styleClass="metric-card metric-destructive" spacing="8" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="Alertas Activas" styleClass="metric-label"/>
                                <Label text="3" styleClass="metric-value"/>
                            </VBox>
                            <VBox styleClass="metric-card" spacing="8" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <Label text="Reservas Afectadas" styleClass="metric-label"/>
                                <Label text="4" styleClass="metric-value"/>
                            </VBox>
                        </HBox>

                        <FlowPane hgap="18" vgap="18">
                            <children>
                                <VBox styleClass="card climate-card" spacing="16" prefWidth="220">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>
                                    <VBox spacing="4">
                                        <Label text="Cancha Deportiva Norte" styleClass="card-title" wrapText="true"/>
                                        <Label text="Probabilidad de lluvia" styleClass="card-subtitle" wrapText="true"/>
                                    </VBox>
                                    <Label text="24°C" styleClass="weather-temp-small"/>
                                    <VBox spacing="6">
                                        <Label text="Humedad 78%" styleClass="muted-label"/>
                                        <Label text="Viento 18 km/h" styleClass="muted-label"/>
                                    </VBox>
                                    <HBox spacing="8" alignment="CENTER_LEFT" styleClass="climate-detail">
                                        <Label text="🌧" styleClass="climate-detail-icon"/>
                                        <Label text="Lluvias moderadas" styleClass="climate-detail-text" wrapText="true"/>
                                    </HBox>
                                </VBox>

                                <VBox styleClass="card climate-card" spacing="16" prefWidth="220">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>
                                    <VBox spacing="4">
                                        <Label text="Parque Recreativo Sur" styleClass="card-title" wrapText="true"/>
                                        <Label text="Vigilancia de vientos" styleClass="card-subtitle" wrapText="true"/>
                                    </VBox>
                                    <Label text="21°C" styleClass="weather-temp-small"/>
                                    <VBox spacing="6">
                                        <Label text="Humedad 65%" styleClass="muted-label"/>
                                        <Label text="Viento 28 km/h" styleClass="muted-label"/>
                                    </VBox>
                                    <HBox spacing="8" alignment="CENTER_LEFT" styleClass="climate-detail">
                                        <Label text="💨" styleClass="climate-detail-icon"/>
                                        <Label text="Ráfagas fuertes" styleClass="climate-detail-text" wrapText="true"/>
                                    </HBox>
                                </VBox>

                                <VBox styleClass="card climate-card" spacing="16" prefWidth="220">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>
                                    <VBox spacing="4">
                                        <Label text="Plaza Cultural" styleClass="card-title" wrapText="true"/>
                                        <Label text="Condiciones nubladas" styleClass="card-subtitle" wrapText="true"/>
                                    </VBox>
                                    <Label text="22°C" styleClass="weather-temp-small"/>
                                    <VBox spacing="6">
                                        <Label text="Humedad 70%" styleClass="muted-label"/>
                                        <Label text="Viento 12 km/h" styleClass="muted-label"/>
                                    </VBox>
                                    <HBox spacing="8" alignment="CENTER_LEFT" styleClass="climate-detail">
                                        <Label text="☁️" styleClass="climate-detail-icon"/>
                                        <Label text="Posibles lloviznas" styleClass="climate-detail-text" wrapText="true"/>
                                    </HBox>
                                </VBox>
                            </children>
                        </FlowPane>
                    </VBox>

                    <!-- System Settings -->
                    <VBox fx:id="settingsSection" spacing="24" styleClass="main-content" fillWidth="true" visible="false" managed="false">
                        <padding>
                            <Insets top="24" right="32" bottom="32" left="32"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label text="Configuración del Sistema" styleClass="page-title"/>
                                <Label text="Gestiona las configuraciones y políticas del sistema de reservas" styleClass="page-subtitle"/>
                            </VBox>
                        </HBox>

                        <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="card">
                            <tabs>
                                <Tab text="APIs">
                                    <content>
                                        <VBox spacing="16" styleClass="card" fillWidth="true">
                                            <padding>
                                                <Insets top="20" right="24" bottom="24" left="24"/>
                                            </padding>
                                            <Label text="Integración de APIs Externas" styleClass="card-title"/>
                                            <Label text="Configura credenciales para servicios externos como clima y notificaciones" styleClass="card-subtitle" wrapText="true"/>

                                            <VBox spacing="12">
                                                <Label text="API de Clima (OpenWeatherMap)" styleClass="section-label"/>
                                                <TextField promptText="Ingresa la API Key de OpenWeatherMap"/>
                                            </VBox>

                                            <VBox spacing="12">
                                                <Label text="API de Email (SendGrid)" styleClass="section-label"/>
                                                <TextField promptText="Ingresa la API Key de SendGrid"/>
                                            </VBox>

                                            <VBox spacing="12">
                                                <Label text="API de SMS (Twilio)" styleClass="section-label"/>
                                                <TextField promptText="Ingresa la API Key de Twilio"/>
                                            </VBox>

                                            <HBox spacing="12">
                                                <Button text="Guardar Configuración de APIs" styleClass="refresh-button"/>
                                            </HBox>
                                        </VBox>
                                    </content>
                                </Tab>
                                <Tab text="Políticas">
                                    <content>
                                        <VBox spacing="16" styleClass="card" fillWidth="true">
                                            <padding>
                                                <Insets top="20" right="24" bottom="24" left="24"/>
                                            </padding>
                                            <Label text="Políticas del Sistema" styleClass="card-title"/>
                                            <TextArea promptText="Define políticas de uso, términos y condiciones" prefRowCount="6" wrapText="true"/>
                                            <HBox spacing="12">
                                                <Button text="Guardar políticas" styleClass="refresh-button"/>
                                            </HBox>
                                        </VBox>
                                    </content>
                                </Tab>
                                <Tab text="Seguridad">
                                    <content>
                                        <VBox spacing="16" styleClass="card" fillWidth="true">
                                            <padding>
                                                <Insets top="20" right="24" bottom="24" left="24"/>
                                            </padding>
                                            <Label text="Configuración de Seguridad" styleClass="card-title"/>
                                            <CheckBox text="Requerir autenticación multifactor" selected="true"/>
                                            <CheckBox text="Forzar renovación de contraseña cada 90 días"/>
                                            <CheckBox text="Enviar notificaciones ante intentos fallidos" selected="true"/>
                                            <HBox spacing="12">
                                                <Button text="Guardar configuración" styleClass="refresh-button"/>
                                            </HBox>
                                        </VBox>
                                    </content>
                                </Tab>
                            </tabs>
                        </TabPane>
                    </VBox>
                </StackPane>
            </content>
        </ScrollPane>
    </HBox>
</VBox>
