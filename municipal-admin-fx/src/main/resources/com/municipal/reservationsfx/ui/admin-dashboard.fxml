<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.municipal.reservationsfx.ui.controllers.AdminDashboardController"
            stylesheets="/com/municipal/reservationsfx/styles/styles.css" prefWidth="1280" prefHeight="800">
    <left>
        <VBox spacing="8" styleClass="sidebar" BorderPane.alignment="CENTER">
            <children>
                <VBox spacing="4" styleClass="sidebar-header">
                    <children>
                        <Label text="Municipalidad" styleClass="sidebar-subtitle"/>
                        <Label text="Panel de Administración" styleClass="sidebar-title" wrapText="true"/>
                    </children>
                    <padding><Insets top="24" left="28" right="28" bottom="20"/></padding>
                </VBox>
                <VBox spacing="6" styleClass="nav-items">
                    <children>
                        <Button text="Inicio" styleClass="nav-item active" maxWidth="Infinity"/>
                        <Button text="Gestión de espacios" styleClass="nav-item" maxWidth="Infinity"/>
                        <Button text="Gestión de usuarios" styleClass="nav-item" maxWidth="Infinity"/>
                        <Button text="Control de reservas" styleClass="nav-item" maxWidth="Infinity"/>
                        <Button text="Reportes globales" styleClass="nav-item" maxWidth="Infinity"/>
                        <Button text="Monitoreo climático" styleClass="nav-item" maxWidth="Infinity"/>
                        <Button text="Configuración" styleClass="nav-item" maxWidth="Infinity"/>
                    </children>
                    <padding><Insets left="20" right="20"/></padding>
                </VBox>
            </children>
        </VBox>
    </left>
    <top>
        <HBox alignment="CENTER_RIGHT" spacing="18" styleClass="topbar" BorderPane.alignment="CENTER">
            <children>
                <VBox alignment="CENTER_LEFT">
                    <children>
                        <Label text="Resumen general" styleClass="muted-label"/>
                        <Label text="Panel de Administración" styleClass="page-title"/>
                    </children>
                </VBox>
                <StackPane styleClass="spacer" HBox.hgrow="ALWAYS"/>
                <Button text="Actualizar datos" styleClass="ghost-button"/>
                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="user-pill">
                    <children>
                        <StackPane>
                            <Circle radius="18" styleClass="user-avatar"/>
                            <Label text="CR" styleClass="avatar-initials"/>
                        </StackPane>
                        <VBox>
                            <children>
                                <Label text="Carlos Rodríguez" styleClass="user-name"/>
                                <Label text="Administrador" styleClass="muted-label"/>
                            </children>
                        </VBox>
                    </children>
                </HBox>
            </children>
            <padding><Insets top="24" bottom="24" left="32" right="32"/></padding>
        </HBox>
    </top>
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="content-scroll">
            <content>
                <VBox fx:id="mainContainer" spacing="24" styleClass="content">
                    <children>
                        <FlowPane hgap="18" vgap="18" prefWrapLength="1200" styleClass="stat-grid">
                            <children>
                                <VBox styleClass="card stat-card">
                                    <children>
                                        <Label text="Espacios Activos" styleClass="card-subtitle"/>
                                        <Label fx:id="activeSpacesLabel" text="0" styleClass="card-kpi"/>
                                        <Label text="Gestiona los espacios disponibles" styleClass="muted-label" wrapText="true"/>
                                    </children>
                                </VBox>
                                <VBox styleClass="card stat-card">
                                    <children>
                                        <Label text="Reservas Hoy" styleClass="card-subtitle"/>
                                        <Label fx:id="todayReservationsLabel" text="0" styleClass="card-kpi"/>
                                        <Label text="Monitoreo de actividades" styleClass="muted-label" wrapText="true"/>
                                    </children>
                                </VBox>
                                <VBox styleClass="card stat-card">
                                    <children>
                                        <Label text="Ocupación Semanal" styleClass="card-subtitle"/>
                                        <Label fx:id="weeklyOccupancyLabel" text="0%" styleClass="card-kpi"/>
                                        <Label text="Promedio semanal" styleClass="muted-label" wrapText="true"/>
                                    </children>
                                </VBox>
                                <VBox styleClass="card stat-card">
                                    <children>
                                        <Label text="Usuarios Registrados" styleClass="card-subtitle"/>
                                        <Label fx:id="totalUsersLabel" text="0" styleClass="card-kpi"/>
                                        <Label text="Gestión de accesos" styleClass="muted-label" wrapText="true"/>
                                    </children>
                                </VBox>
                            </children>
                        </FlowPane>

                        <HBox spacing="24" alignment="TOP_LEFT">
                            <children>
                                <VBox spacing="16" styleClass="card weather-card" VBox.vgrow="ALWAYS">
                                    <children>
                                        <HBox alignment="CENTER_LEFT" spacing="12">
                                            <Label text="Clima actual" styleClass="card-title"/>
                                            <Label text="Actualizado hace 5 min" styleClass="tag chip"/>
                                        </HBox>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <VBox spacing="6">
                                                <Label text="24°C" styleClass="weather-temp"/>
                                                <Label text="Sunny" styleClass="muted-label"/>
                                                <Label text="Viento 10 km/h" styleClass="muted-label"/>
                                            </VBox>
                                            <StackPane styleClass="weather-icon"/>
                                        </HBox>
                                    </children>
                                </VBox>
                                <VBox spacing="16" styleClass="card alerts-card" VBox.vgrow="ALWAYS">
                                    <children>
                                        <HBox alignment="CENTER_LEFT" spacing="12">
                                            <Label text="Alertas rápidas" styleClass="card-title"/>
                                            <Label text="Última hora" styleClass="tag warning"/>
                                        </HBox>
                                        <ListView fx:id="alertsList" prefHeight="160"/>
                                        <Button text="Ver alertas" styleClass="ghost-button" maxWidth="Infinity"/>
                                    </children>
                                </VBox>
                            </children>
                        </HBox>

                        <VBox spacing="16" styleClass="card">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="12">
                                    <Label text="Gestión de espacios" styleClass="card-title"/>
                                    <Button text="Nuevo espacio" styleClass="primary-button"/>
                                </HBox>
                                <FlowPane fx:id="spacesFlow" hgap="16" vgap="16" prefWrapLength="900"/>
                            </children>
                        </VBox>

                        <VBox spacing="16" styleClass="card">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="12">
                                    <Label text="Reservas recientes" styleClass="card-title"/>
                                    <Button text="Actualizar" styleClass="ghost-button"/>
                                </HBox>
                                <GridPane fx:id="reservationsGrid" hgap="4" vgap="4" styleClass="table">
                                    <columnConstraints>
                                        <ColumnConstraints percentWidth="18"/>
                                        <ColumnConstraints percentWidth="20"/>
                                        <ColumnConstraints percentWidth="14"/>
                                        <ColumnConstraints percentWidth="12"/>
                                        <ColumnConstraints percentWidth="14"/>
                                        <ColumnConstraints percentWidth="10"/>
                                        <ColumnConstraints percentWidth="12"/>
                                    </columnConstraints>
                                    <children>
                                        <Label text="Solicitante" styleClass="table-header" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                        <Label text="Espacio" styleClass="table-header" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                                        <Label text="Fecha" styleClass="table-header" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                                        <Label text="Hora" styleClass="table-header" GridPane.rowIndex="0" GridPane.columnIndex="3"/>
                                        <Label text="Estado" styleClass="table-header" GridPane.rowIndex="0" GridPane.columnIndex="4"/>
                                        <Label text="QR" styleClass="table-header" GridPane.rowIndex="0" GridPane.columnIndex="5"/>
                                        <Label text="Clima" styleClass="table-header" GridPane.rowIndex="0" GridPane.columnIndex="6"/>
                                    </children>
                                </GridPane>
                            </children>
                        </VBox>

                        <VBox spacing="12" alignment="CENTER" styleClass="footer">
                            <children>
                                <Label text="Municipalidad de Pérez Zeledón" styleClass="muted-label"/>
                                <Label text="Sistema de Reservas Municipales - Azure AD" styleClass="muted-label"/>
                            </children>
                        </VBox>
                    </children>
                    <padding><Insets top="16" bottom="32" left="16" right="16"/></padding>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
