<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.layout.ColumnConstraints?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.municipal.reservationsfx.ui.controllers.SystemSettingsController"
      spacing="24"
      styleClass="main-content"
      fillWidth="true">

    <padding>
        <Insets top="24" right="32" bottom="32" left="32"/>
    </padding>

    <HBox alignment="CENTER_LEFT" spacing="12">
        <VBox spacing="4" HBox.hgrow="ALWAYS">
            <Label text="Configuración del sistema" styleClass="page-title"/>
            <Label text="Gestiona las configuraciones y políticas del sistema de reservas" styleClass="page-subtitle"/>
        </VBox>
        <Button fx:id="saveButton" text="Guardar cambios" styleClass="primary-button">
            <graphic>
                <Label text="💾" styleClass="button-icon"/>
            </graphic>
        </Button>
    </HBox>

    <TabPane fx:id="settingsTabs" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
        <tabs>
            <Tab text="APIs">
                <content>
                    <VBox spacing="18" styleClass="card" fillWidth="true">
                        <padding>
                            <Insets top="24" right="24" bottom="24" left="24"/>
                        </padding>
                        <Label text="Integración de APIs Externas" styleClass="card-title"/>
                        <Label text="Configura las claves de servicios externos para notificaciones y clima" styleClass="card-subtitle" wrapText="true"/>
                        <GridPane hgap="18" vgap="16">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="30"/>
                                <ColumnConstraints percentWidth="70"/>
                            </columnConstraints>
                            <children>
                                <Label text="API de clima (OpenWeatherMap)" styleClass="form-label"/>
                                <TextField fx:id="weatherApiField" promptText="Ingresa el API Key" GridPane.columnIndex="1"/>

                                <Label text="API de Email (SendGrid)" styleClass="form-label" GridPane.rowIndex="1"/>
                                <TextField fx:id="emailApiField" promptText="Ingresa el API Key" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                <Label text="API de SMS (Twilio)" styleClass="form-label" GridPane.rowIndex="2"/>
                                <TextField fx:id="smsApiField" promptText="Ingresa el API Key" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                <Label text="Webhook de alertas" styleClass="form-label" GridPane.rowIndex="3"/>
                                <TextField fx:id="webhookField" promptText="https://" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
                            </children>
                        </GridPane>
                    </VBox>
                </content>
            </Tab>
            <Tab text="Políticas">
                <content>
                    <VBox spacing="18" styleClass="card">
                        <padding>
                            <Insets top="24" right="24" bottom="24" left="24"/>
                        </padding>
                        <Label text="Reglas de cancelación" styleClass="card-title"/>
                        <TextArea fx:id="cancellationPolicyArea" promptText="Describe las reglas de cancelación" prefRowCount="6" wrapText="true"/>
                        <CheckBox fx:id="requireApprovalCheck" text="Requerir aprobación manual para cancelaciones tardías"/>
                    </VBox>
                </content>
            </Tab>
            <Tab text="Seguridad">
                <content>
                    <VBox spacing="18" styleClass="card">
                        <padding>
                            <Insets top="24" right="24" bottom="24" left="24"/>
                        </padding>
                        <Label text="Controles de acceso" styleClass="card-title"/>
                        <CheckBox fx:id="mfaCheck" text="Habilitar autenticación multifactor para administradores"/>
                        <CheckBox fx:id="sessionTimeoutCheck" text="Expirar sesiones inactivas en 30 minutos"/>
                        <CheckBox fx:id="auditLogCheck" text="Activar auditoría avanzada"/>
                    </VBox>
                </content>
            </Tab>
        </tabs>
    </TabPane>

    <HBox spacing="12" alignment="CENTER_LEFT">
        <Label text="Estado de sincronización" styleClass="card-subtitle"/>
        <Label fx:id="statusLabel" text="Sin cambios" styleClass="status-label"/>
    </HBox>
</VBox>
