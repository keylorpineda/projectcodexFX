<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ChoiceBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.municipal.ui.controllers.SupervisorDashboardController"
      stylesheets="@supervisor-dashboard.css"
      styleClass="supervisor-root"
      spacing="0">

    <!-- Encabezado superior -->
    <HBox styleClass="supervisor-header" alignment="CENTER_LEFT" spacing="0" VBox.vgrow="NEVER">
        <padding>
            <Insets top="16" right="24" bottom="16" left="24"/>
        </padding>

        <HBox alignment="CENTER_LEFT" spacing="12" HBox.hgrow="ALWAYS">
            <StackPane styleClass="logo-container" minWidth="40" minHeight="40">
                <Circle radius="20" styleClass="logo-bg"/>
                <Label text="🛡" styleClass="logo-icon"/>
            </StackPane>
            <VBox spacing="2">
                <Label text="Panel del Supervisor" styleClass="header-title"/>
                <Label text="Monitoreo y control de reservas municipales" styleClass="header-subtitle"/>
            </VBox>
        </HBox>

        <Region HBox.hgrow="ALWAYS"/>

        <HBox styleClass="supervisor-menu" spacing="8" alignment="CENTER">
            <Circle radius="16" styleClass="supervisor-avatar"/>
            <VBox spacing="0">
                <Label fx:id="lblNombreSupervisor" text="Supervisor" styleClass="supervisor-name"/>
                <Label text="Coordinador" styleClass="supervisor-role"/>
            </VBox>
        </HBox>
    </HBox>

    <!-- Contenido principal -->
    <HBox spacing="0" VBox.vgrow="ALWAYS">

        <!-- Navegación lateral -->
        <VBox styleClass="sidebar" spacing="8" prefWidth="260" minWidth="240" HBox.hgrow="NEVER">
            <padding>
                <Insets top="16" right="0" bottom="16" left="0"/>
            </padding>

            <Label text="MENÚ DEL SUPERVISOR" styleClass="sidebar-section-title">
                <padding>
                    <Insets left="16"/>
                </padding>
            </Label>

            <Button fx:id="btnInicio" text="📊  Panel de control" styleClass="nav-item nav-item-active"
                    onAction="#mostrarInicio" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="12" right="16" bottom="12" left="16"/>
                </padding>
            </Button>

            <Button fx:id="btnReservas" text="📅  Gestión de reservas" styleClass="nav-item"
                    onAction="#mostrarReservas" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="12" right="16" bottom="12" left="16"/>
                </padding>
            </Button>

            <Button fx:id="btnEspacios" text="🏢  Espacios municipales" styleClass="nav-item"
                    onAction="#mostrarEspacios" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="12" right="16" bottom="12" left="16"/>
                </padding>
            </Button>

            <Button fx:id="btnNotificaciones" text="🔔  Notificaciones" styleClass="nav-item"
                    onAction="#mostrarNotificaciones" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="12" right="16" bottom="12" left="16"/>
                </padding>
            </Button>

            <Button fx:id="btnUsuarios" text="👥  Directorio de usuarios" styleClass="nav-item"
                    onAction="#mostrarUsuarios" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="12" right="16" bottom="12" left="16"/>
                </padding>
            </Button>

            <Button fx:id="btnAuditoria" text="🕒  Auditoría" styleClass="nav-item"
                    onAction="#mostrarAuditoria" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="12" right="16" bottom="12" left="16"/>
                </padding>
            </Button>
        </VBox>

        <!-- Contenedor de secciones -->
        <StackPane fx:id="contenedorPrincipal" styleClass="main-content-wrapper" HBox.hgrow="ALWAYS">

            <!-- Panel de inicio -->
            <ScrollPane fx:id="vistaInicio" fitToWidth="true" fitToHeight="true" styleClass="content-scroll">
                <content>
                    <VBox styleClass="main-content" spacing="24">
                        <padding>
                            <Insets top="32" right="32" bottom="32" left="32"/>
                        </padding>

                        <VBox spacing="8">
                            <Label text="Resumen operativo" styleClass="page-title"/>
                            <Label text="Supervisa indicadores clave y coordina acciones prioritarias" styleClass="page-subtitle"/>
                        </VBox>

                        <HBox spacing="20">
                            <VBox styleClass="metric-card" spacing="12" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <HBox alignment="CENTER_LEFT" spacing="12">
                                    <Label text="📝" styleClass="metric-icon"/>
                                    <Label text="Pendientes" styleClass="metric-label"/>
                                </HBox>
                                <Label text="--" styleClass="metric-value"/>
                                <Label text="Reservas aguardando aprobación" styleClass="metric-description"/>
                            </VBox>

                            <VBox styleClass="metric-card metric-success" spacing="12" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <HBox alignment="CENTER_LEFT" spacing="12">
                                    <Label text="✅" styleClass="metric-icon"/>
                                    <Label text="Check-ins" styleClass="metric-label"/>
                                </HBox>
                                <Label text="--" styleClass="metric-value"/>
                                <Label text="Registros confirmados hoy" styleClass="metric-description"/>
                            </VBox>

                            <VBox styleClass="metric-card metric-destructive" spacing="12" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                </padding>
                                <HBox alignment="CENTER_LEFT" spacing="12">
                                    <Label text="⚠" styleClass="metric-icon"/>
                                    <Label text="Incidencias" styleClass="metric-label"/>
                                </HBox>
                                <Label text="--" styleClass="metric-value"/>
                                <Label text="Reportes que requieren seguimiento" styleClass="metric-description"/>
                            </VBox>
                        </HBox>

                        <HBox spacing="20">
                            <VBox styleClass="card" spacing="16" prefWidth="420">
                                <padding>
                                    <Insets top="24" right="24" bottom="24" left="24"/>
                                </padding>
                                <Label text="Agenda del día" styleClass="card-title"/>
                                <Label text="Eventos próximos que requieren presencia del supervisor" styleClass="card-subtitle"/>

                                <VBox spacing="12">
                                    <Label text="08:00  |  Revisión de reservas pendientes" styleClass="timeline-item"/>
                                    <Label text="11:00  |  Coordinación con Seguridad" styleClass="timeline-item"/>
                                    <Label text="15:00  |  Actualización de espacios" styleClass="timeline-item"/>
                                </VBox>
                            </VBox>

                            <VBox styleClass="card" spacing="16" HBox.hgrow="ALWAYS">
                                <padding>
                                    <Insets top="24" right="24" bottom="24" left="24"/>
                                </padding>
                                <Label text="Acciones rápidas" styleClass="card-title"/>
                                <Label text="Atajos para tareas frecuentes del supervisor" styleClass="card-subtitle"/>

                                <VBox spacing="12">
                                    <Button text="📄  Revisar reservas pendientes" styleClass="pill-button" maxWidth="Infinity"
                                            onAction="#mostrarReservas"/>
                                    <Button text="✅  Registrar check-in" styleClass="pill-button" maxWidth="Infinity"
                                            onAction="#mostrarReservas"/>
                                    <Button text="📢  Enviar notificación" styleClass="pill-button" maxWidth="Infinity"
                                            onAction="#mostrarNotificaciones"/>
                                </VBox>
                            </VBox>
                        </HBox>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Gestión de reservas -->
            <ScrollPane fx:id="vistaReservas" fitToWidth="true" fitToHeight="true" styleClass="content-scroll"
                        visible="false" managed="false">
                <content>
                    <VBox styleClass="main-content" spacing="24">
                        <padding>
                            <Insets top="32" right="32" bottom="32" left="32"/>
                        </padding>

                        <VBox spacing="8">
                            <Label text="Gestión de reservas" styleClass="page-title"/>
                            <Label text="Aprueba, reprograma o cancela reservas de cualquier usuario" styleClass="page-subtitle"/>
                        </VBox>

                        <HBox spacing="12">
                            <TextField promptText="Buscar por usuario o espacio" HBox.hgrow="ALWAYS"/>
                            <ChoiceBox prefWidth="160"/>
                            <TextField promptText="Rango de fechas" prefWidth="200"/>
                        </HBox>

                        <FlowPane hgap="12" vgap="12">
                            <Button text="Aprobar" styleClass="pill-button"/>
                            <Button text="Cancelar" styleClass="pill-button"/>
                            <Button text="Registrar check-in" styleClass="pill-button"/>
                            <Button text="Marcar no-show" styleClass="pill-button"/>
                            <Button text="Editar reserva" styleClass="pill-button"/>
                        </FlowPane>

                        <VBox styleClass="card" spacing="16">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <Label text="Reservas registradas" styleClass="card-title"/>
                            <TableView prefHeight="360">
                                <columns>
                                    <TableColumn text="Código" prefWidth="120"/>
                                    <TableColumn text="Usuario" prefWidth="180"/>
                                    <TableColumn text="Espacio" prefWidth="180"/>
                                    <TableColumn text="Fecha" prefWidth="140"/>
                                    <TableColumn text="Estado" prefWidth="140"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Catálogo de espacios -->
            <ScrollPane fx:id="vistaEspacios" fitToWidth="true" fitToHeight="true" styleClass="content-scroll"
                        visible="false" managed="false">
                <content>
                    <VBox styleClass="main-content" spacing="24">
                        <padding>
                            <Insets top="32" right="32" bottom="32" left="32"/>
                        </padding>

                        <VBox spacing="8">
                            <Label text="Espacios municipales" styleClass="page-title"/>
                            <Label text="Activa, desactiva y ajusta información de los espacios disponibles" styleClass="page-subtitle"/>
                        </VBox>

                        <HBox spacing="12">
                            <TextField promptText="Buscar espacio" HBox.hgrow="ALWAYS"/>
                            <ChoiceBox prefWidth="180"/>
                            <ChoiceBox prefWidth="160"/>
                        </HBox>

                        <FlowPane hgap="12" vgap="12">
                            <Button text="Nuevo espacio" styleClass="pill-button"/>
                            <Button text="Editar seleccionado" styleClass="pill-button"/>
                            <Button text="Activar / Desactivar" styleClass="pill-button"/>
                            <Button text="Ver horarios" styleClass="pill-button"/>
                            <Button text="Gestionar recursos" styleClass="pill-button"/>
                        </FlowPane>

                        <VBox styleClass="card" spacing="16">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <Label text="Listado de espacios" styleClass="card-title"/>
                            <TableView prefHeight="360">
                                <columns>
                                    <TableColumn text="Nombre" prefWidth="220"/>
                                    <TableColumn text="Tipo" prefWidth="160"/>
                                    <TableColumn text="Capacidad" prefWidth="140"/>
                                    <TableColumn text="Estado" prefWidth="140"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Centro de notificaciones -->
            <ScrollPane fx:id="vistaNotificaciones" fitToWidth="true" fitToHeight="true" styleClass="content-scroll"
                        visible="false" managed="false">
                <content>
                    <VBox styleClass="main-content" spacing="24">
                        <padding>
                            <Insets top="32" right="32" bottom="32" left="32"/>
                        </padding>

                        <VBox spacing="8">
                            <Label text="Centro de notificaciones" styleClass="page-title"/>
                            <Label text="Gestiona comunicados automáticos y manuales para la comunidad" styleClass="page-subtitle"/>
                        </VBox>

                        <HBox spacing="12">
                            <TextField promptText="Buscar notificación" HBox.hgrow="ALWAYS"/>
                            <ChoiceBox prefWidth="180"/>
                            <ChoiceBox prefWidth="160"/>
                        </HBox>

                        <FlowPane hgap="12" vgap="12">
                            <Button text="Crear notificación" styleClass="pill-button"/>
                            <Button text="Editar" styleClass="pill-button"/>
                            <Button text="Enviar ahora" styleClass="pill-button"/>
                            <Button text="Eliminar" styleClass="pill-button"/>
                        </FlowPane>

                        <VBox styleClass="card" spacing="16">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <Label text="Historial de notificaciones" styleClass="card-title"/>
                            <TableView prefHeight="360">
                                <columns>
                                    <TableColumn text="Título" prefWidth="220"/>
                                    <TableColumn text="Destinatarios" prefWidth="200"/>
                                    <TableColumn text="Estado" prefWidth="140"/>
                                    <TableColumn text="Programada" prefWidth="140"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Directorio de usuarios -->
            <ScrollPane fx:id="vistaUsuarios" fitToWidth="true" fitToHeight="true" styleClass="content-scroll"
                        visible="false" managed="false">
                <content>
                    <VBox styleClass="main-content" spacing="24">
                        <padding>
                            <Insets top="32" right="32" bottom="32" left="32"/>
                        </padding>

                        <VBox spacing="8">
                            <Label text="Directorio de usuarios" styleClass="page-title"/>
                            <Label text="Consulta información de usuarios para dar seguimiento a casos" styleClass="page-subtitle"/>
                        </VBox>

                        <HBox spacing="12">
                            <TextField promptText="Buscar usuario" HBox.hgrow="ALWAYS"/>
                            <ChoiceBox prefWidth="180"/>
                            <ChoiceBox prefWidth="160"/>
                        </HBox>

                        <FlowPane hgap="12" vgap="12">
                            <Button text="Ver detalle" styleClass="pill-button"/>
                            <Button text="Exportar listado" styleClass="pill-button"/>
                        </FlowPane>

                        <VBox styleClass="card" spacing="16">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <Label text="Usuarios registrados" styleClass="card-title"/>
                            <TableView prefHeight="360">
                                <columns>
                                    <TableColumn text="Nombre" prefWidth="220"/>
                                    <TableColumn text="Correo" prefWidth="220"/>
                                    <TableColumn text="Rol" prefWidth="140"/>
                                    <TableColumn text="Estado" prefWidth="140"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Registro de auditoría -->
            <ScrollPane fx:id="vistaAuditoria" fitToWidth="true" fitToHeight="true" styleClass="content-scroll"
                        visible="false" managed="false">
                <content>
                    <VBox styleClass="main-content" spacing="24">
                        <padding>
                            <Insets top="32" right="32" bottom="32" left="32"/>
                        </padding>

                        <VBox spacing="8">
                            <Label text="Registro de auditoría" styleClass="page-title"/>
                            <Label text="Revisa las acciones ejecutadas por todos los roles del sistema" styleClass="page-subtitle"/>
                        </VBox>

                        <HBox spacing="12">
                            <TextField promptText="Buscar evento" HBox.hgrow="ALWAYS"/>
                            <ChoiceBox prefWidth="180"/>
                            <TextField promptText="Rango de fechas" prefWidth="200"/>
                        </HBox>

                        <FlowPane hgap="12" vgap="12">
                            <Button text="Ver detalle" styleClass="pill-button"/>
                            <Button text="Exportar auditoría" styleClass="pill-button"/>
                        </FlowPane>

                        <VBox styleClass="card" spacing="16">
                            <padding>
                                <Insets top="20" right="20" bottom="20" left="20"/>
                            </padding>
                            <Label text="Eventos registrados" styleClass="card-title"/>
                            <TableView prefHeight="360">
                                <columns>
                                    <TableColumn text="Fecha" prefWidth="160"/>
                                    <TableColumn text="Usuario" prefWidth="200"/>
                                    <TableColumn text="Acción" prefWidth="200"/>
                                    <TableColumn text="Resultado" prefWidth="160"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </VBox>
                </content>
            </ScrollPane>
        </StackPane>
    </HBox>
</VBox>