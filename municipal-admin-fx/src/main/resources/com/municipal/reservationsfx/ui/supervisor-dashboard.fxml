<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane fx:id="rootPane"
            xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.municipal.ui.controllers.SupervisorDashboardController"
            stylesheets="@../styles/supervisor-dashboard.css"
            styleClass="root-container">
    <left>
        <VBox styleClass="sidebar" prefWidth="230" spacing="0">
            <VBox styleClass="sidebar-header" spacing="12">
                <padding>
                    <Insets top="24" right="20" bottom="24" left="20"/>
                </padding>
                <HBox spacing="12" alignment="CENTER_LEFT">
                    <StackPane styleClass="app-logo">
                        <ImageView fitHeight="58" fitWidth="58" pickOnBounds="true" preserveRatio="true"
                                  styleClass="logo-image">
                            <image>
                                <Image url="@../../../../images/EscudoMunicipalidadPérezZeledon.png" />
                            </image>
                        </ImageView>
                    </StackPane>
                    <VBox spacing="2">
                        <Label text="Sistema de Reservas" styleClass="app-title"/>
                        <Label text="Municipalidad de Pérez Zeledón" wrapText="true" styleClass="app-subtitle"/>
                    </VBox>
                </HBox>
            </VBox>

            <VBox styleClass="nav-container" spacing="6" VBox.vgrow="ALWAYS">
                <padding>
                    <Insets top="12" right="16" bottom="12" left="16"/>
                </padding>
                <Button text="⌂  Inicio" styleClass="nav-btn" disable="true" />
                <Button text="📋  Reservas" styleClass="nav-btn nav-btn-active" disable="true" />
                <Button text="📍  Espacios" styleClass="nav-btn" disable="true" />
                <Button text="🔔  Notificaciones" styleClass="nav-btn" disable="true" />
                <Button text="👤  Usuarios" styleClass="nav-btn" disable="true" />
                <Button text="📄  Auditoría" styleClass="nav-btn" disable="true" />
                <Region VBox.vgrow="ALWAYS" />
            </VBox>

            <VBox styleClass="sidebar-footer">
                <padding>
                    <Insets top="16" right="16" bottom="24" left="16"/>
                </padding>
                <Button fx:id="btnCerrarSesion" text="⎋  Cerrar sesión" styleClass="logout-button"
                        onAction="#cerrarSesion" maxWidth="Infinity">
                    <cursor><Cursor fx:constant="HAND"/></cursor>
                </Button>
            </VBox>
        </VBox>
    </left>

    <center>
        <VBox styleClass="main-container" spacing="0">
            <VBox styleClass="header" spacing="12">
                <padding>
                    <Insets top="28" right="36" bottom="28" left="36"/>
                </padding>
                <HBox alignment="CENTER_LEFT" spacing="16">
                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                        <Label text="Panel de Supervisor" styleClass="header-title"/>
                        <Label text="Control exclusivo de reservas confirmadas" styleClass="header-subtitle"/>
                        <Label text="Revisa, filtra y valida accesos con apoyo del código QR" wrapText="true"
                               styleClass="header-description"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                    <VBox spacing="2" styleClass="supervisor-box">
                        <Label fx:id="lblSupervisorName" text="Supervisor" styleClass="supervisor-name"/>
                        <Label fx:id="lblSupervisorEmail" text="supervisor@perezzeledon.go.cr"
                               styleClass="supervisor-email"/>
                    </VBox>
                </HBox>
            </VBox>

            <VBox styleClass="content" spacing="24">
                <padding>
                    <Insets top="0" right="36" bottom="36" left="36"/>
                </padding>

                <HBox spacing="12" alignment="CENTER_LEFT">
                    <TextField fx:id="txtBuscar" promptText="Buscar por espacio o ubicación" styleClass="search-field"/>
                    <Button fx:id="btnLimpiarFiltro" text="Limpiar" styleClass="ghost-button"
                            onAction="#limpiarFiltro"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="btnRefrescar" text="Actualizar" styleClass="primary-button"
                            onAction="#recargarReservas"/>
                </HBox>

                <HBox spacing="20" alignment="TOP_LEFT" styleClass="workspace">
                    <VBox spacing="14" styleClass="list-container">
                        <Label text="Reservas confirmadas" styleClass="section-title"/>
                        <StackPane VBox.vgrow="ALWAYS" styleClass="list-wrapper">
                            <ListView fx:id="lvReservas" styleClass="reservation-list" />
                            <Label fx:id="lblEmptyState" text="Cargando reservas confirmadas…" wrapText="true"
                                   styleClass="empty-state" visible="false" StackPane.alignment="CENTER"/>
                        </StackPane>
                    </VBox>

                    <VBox spacing="12" styleClass="detail-container" HBox.hgrow="ALWAYS">
                        <Label text="Detalle de la reserva" styleClass="section-title"/>
                        <Label fx:id="lblDetalleTitulo" text="Selecciona una reserva confirmada" wrapText="true"
                               styleClass="detail-title"/>
                        <Label fx:id="lblDetalleUbicacion" text="Ubicación: -" wrapText="true" styleClass="detail-text"/>
                        <Label fx:id="lblDetalleHorario" text="Horario: -" wrapText="true" styleClass="detail-text"/>
                        <Label fx:id="lblDetalleEstado" text="Estado: -" styleClass="detail-chip"/>
                        <Label fx:id="lblDetalleNotas" text="Notas: -" wrapText="true" styleClass="detail-text"/>
                        <Label fx:id="lblDetalleAsistentes" text="Capacidad confirmada: -" styleClass="detail-text"/>
                        <Label fx:id="lblDetalleIngresos" text="Ingresos registrados en esta sesión: -" wrapText="true"
                               styleClass="detail-text"/>
                        <Label fx:id="lblDetalleCheckIn" text="Último check-in registrado en el sistema: -"
                               wrapText="true" styleClass="detail-meta"/>
                        <Label fx:id="lblDetalleCreada" text="Creada: -" styleClass="detail-meta"/>
                        <Label fx:id="lblDetalleActualizada" text="Actualizada: -" styleClass="detail-meta"/>
                        <Region VBox.vgrow="ALWAYS"/>
                        <Button fx:id="btnValidarQr" text="Validar QR" styleClass="accent-button"
                                onAction="#iniciarValidacionQr" disable="true"/>
                    </VBox>
                </HBox>
            </VBox>
        </VBox>
    </center>
</BorderPane>